# Backend production env example (DO NOT COMMIT REAL SECRETS)
# Copy to: backend/.env on the server, or export via your process manager.

# Core
PORT=5000
NODE_ENV=production
IS_PRODUCTION=true
TRUST_PROXY=true

# API body limits (keep aligned with Nginx client_max_body_size)
# Note: uploads are mostly direct-to-R2; these limits cover JSON payloads (e.g. signature images).
API_JSON_LIMIT=10mb
API_URLENCODED_LIMIT=10mb

# API request timeout (Express layer)
API_REQUEST_TIMEOUT_MS=30000

# Server timeouts (Node HTTP server layer)
# Keep aligned with Nginx proxy_*_timeout values.
SERVER_REQUEST_TIMEOUT_MS=60000
SERVER_HEADERS_TIMEOUT_MS=65000
SERVER_KEEPALIVE_TIMEOUT_MS=5000

# Auth
JWT_SECRET=__SET_ME__

# Postgres (local)
DB_HOST=127.0.0.1
DB_PORT=5432
DB_NAME=melamedlaw
DB_USER=melamedlaw_app
DB_PASSWORD=__SET_ME__
DB_SSL=false

# Pool tuning
DB_POOL_MAX=20
DB_POOL_IDLE_TIMEOUT_MS=30000
DB_POOL_CONN_TIMEOUT_MS=5000

# Rate limiting
RATE_LIMIT_IP_WINDOW_MS=60000
RATE_LIMIT_IP_MAX=600
RATE_LIMIT_AUTH_IP_WINDOW_MS=600000
RATE_LIMIT_AUTH_IP_MAX=40
RATE_LIMIT_USER_WINDOW_MS=300000
RATE_LIMIT_USER_MAX=600

# Object storage (S3/R2)
S3_ENDPOINT=__SET_ME__
S3_BUCKET=__SET_ME__
S3_KEY=__SET_ME__
S3_SECRET=__SET_ME__

# Signing limits (R2/PDF processing)
# See: docs/uploads-signing-production.md
MAX_SIGNING_PDF_BYTES=26214400
MAX_SIGNATURE_IMAGE_BYTES=524288
SIGNING_PDF_OP_TIMEOUT_MS=20000

# Debug logging (avoid PII/secrets in production)
SIGNING_DEBUG_LOGS=false

# SMS (Twilio)
TWILIO_ACCOUNT_SID=__SET_ME__
TWILIO_AUTH_TOKEN=__SET_ME__
TWILIO_PHONE_NUMBER=__SET_ME__
